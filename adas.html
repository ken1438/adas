<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MacroSim: AD-AS Interaction Model</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icon Components (Replacements for Lucide-React) ---
        const Icons = {
            ArrowUp: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m5 12 7-7 7 7"/><path d="M12 19V5"/></svg>,
            ArrowDown: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 5v14"/><path d="m19 12-7 7-7-7"/></svg>,
            Minus: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14"/></svg>,
            Info: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            RefreshCw: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>,
            TrendingUp: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>,
            TrendingDown: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>,
            DollarSign: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="12" y1="2" x2="12" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
            Activity: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>,
            Globe: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        };

        // --- Data & Logic ---
        const SCENARIOS = [
          {
            id: 'base',
            title: 'Long Run Equilibrium',
            type: 'neutral',
            description: 'The economy is operating at full employment output.',
            curveShifts: { ad: 0, sras: 0, lras: 0 },
            impacts: {
              priceLevel: 'Stable',
              realOutput: 'Full Employment',
              interestRate: 'Stable',
              taxRevenue: 'Stable',
              tradeBalance: 'Balanced'
            },
            explanation: "The economy is at the intersection of AD, SRAS, and LRAS. There are no shocks."
          },
          {
            id: 'property_boom',
            title: "Demand Shock: Increase in Property Prices",
            type: 'demand',
            shift: 'right',
            description: "Exogenous increase in property prices raises household wealth.",
            curveShifts: { ad: 20, sras: 0, lras: 0 },
            impacts: {
              priceLevel: 'Increase',
              realOutput: 'Increase',
              interestRate: 'Increase', 
              taxRevenue: 'Increase',
              tradeBalance: 'Decrease'
            },
            explanation: [
              "1. Rise in property values increases Household Wealth (Wealth Effect).",
              "2. Households increase private consumption expenditure.",
              "3. Aggregate Demand (AD) shifts RIGHT.",
              "4. Result: Higher Price Level and Higher Real Output.",
              "5. Side Effect: Higher nominal output increases transaction demand for money, pushing Interest Rates UP."
            ]
          },
          {
            id: 'financial_volatility',
            title: "Demand Shock: Financial Market Volatility",
            type: 'demand',
            shift: 'left',
            description: "Increased volatility in stock markets increases risk perception.",
            curveShifts: { ad: -20, sras: 0, lras: 0 },
            impacts: {
              priceLevel: 'Decrease',
              realOutput: 'Decrease',
              interestRate: 'Increase', 
              taxRevenue: 'Decrease',
              tradeBalance: 'Increase'
            },
            explanation: [
              "1. High volatility increases the Asset Demand for Money (people hoard cash/safe assets).",
              "2. Increased money demand drives the Interest Rate UP.",
              "3. Higher interest rates reduce Investment and Consumption.",
              "4. Aggregate Demand (AD) shifts LEFT.",
              "5. Result: Lower Price Level and Lower Real Output."
            ]
          },
          {
            id: 'omo_purchase',
            title: "Central Bank: Open Market Purchase",
            type: 'demand',
            shift: 'right',
            description: "The Central Bank buys government bonds from the public.",
            curveShifts: { ad: 20, sras: 0, lras: 0 },
            impacts: {
              priceLevel: 'Increase',
              realOutput: 'Increase',
              interestRate: 'Decrease',
              taxRevenue: 'Increase',
              tradeBalance: 'Decrease'
            },
            explanation: [
              "1. Open Market Purchase increases Monetary Base & Money Supply.",
              "2. Interest Rate falls (Liquidity effect).",
              "3. Investment & Consumption increase due to lower cost of borrowing.",
              "4. Aggregate Demand (AD) shifts RIGHT.",
              "5. Result: Higher Price Level and Higher Real Output.",
              "6. Side Effect: Higher Output increases Tax Revenue. Higher Prices make exports expensive, worsening Trade Balance."
            ]
          },
          {
            id: 'omo_sale',
            title: "Central Bank: Open Market Sale",
            type: 'demand',
            shift: 'left',
            description: "The Central Bank sells government bonds to the public.",
            curveShifts: { ad: -20, sras: 0, lras: 0 },
            impacts: {
              priceLevel: 'Decrease',
              realOutput: 'Decrease',
              interestRate: 'Increase',
              taxRevenue: 'Decrease',
              tradeBalance: 'Increase'
            },
            explanation: [
              "1. Open Market Sale decreases Money Supply.",
              "2. Interest Rate rises.",
              "3. Investment & Consumption decrease.",
              "4. Aggregate Demand (AD) shifts LEFT.",
              "5. Result: Lower Price Level and Lower Real Output.",
              "6. Side Effect: Lower Output reduces Tax Revenue. Lower Prices make exports cheaper, improving Trade Balance."
            ]
          },
          {
            id: 'tax_increase',
            title: "Fiscal Policy: Increase Income Tax",
            type: 'demand',
            shift: 'left',
            description: "Government raises the standard rate of salaries tax.",
            curveShifts: { ad: -20, sras: 0, lras: 0 },
            impacts: {
              priceLevel: 'Decrease',
              realOutput: 'Decrease',
              interestRate: 'Decrease', 
              taxRevenue: 'Uncertain',
              tradeBalance: 'Increase'
            },
            note: "Tax Revenue effect is complex (Rate vs Base), but AD clearly falls.",
            explanation: [
              "1. Higher Tax reduces Disposable Income.",
              "2. Private Consumption falls.",
              "3. Aggregate Demand (AD) shifts LEFT.",
              "4. Result: Lower Price Level and Lower Real Output.",
              "5. Side Effect: Lower output lowers money demand, lowering interest rates. Lower prices improve trade balance."
            ]
          },
          {
            id: 'migration_out',
            title: "Supply Shock: Migration of Workers Abroad",
            type: 'supply',
            shift: 'left',
            description: "Local workers migrate abroad due to social unrest.",
            curveShifts: { ad: 0, sras: -20, lras: -20 },
            impacts: {
              priceLevel: 'Increase',
              realOutput: 'Decrease',
              interestRate: 'Uncertain',
              taxRevenue: 'Decrease',
              tradeBalance: 'Decrease'
            },
            explanation: [
              "1. Loss of labor force reduces Production Capacity.",
              "2. LRAS and SRAS shift LEFT.",
              "3. Result: 'Stagflation' (Higher Price Level, Lower Real Output).",
              "4. Side Effect: Lower output reduces Tax Revenue. Higher prices make domestic goods expensive, worsening Trade Balance."
            ]
          },
          {
            id: 'infrastructure',
            title: "Fiscal: Infrastructure Investment",
            type: 'mixed',
            shift: 'right',
            description: "Govt increases spending on infrastructure (e.g., bridges, AI).",
            curveShifts: { ad: 15, sras: 10, lras: 10 },
            impacts: {
              priceLevel: 'Uncertain',
              realOutput: 'Increase',
              interestRate: 'Increase',
              taxRevenue: 'Increase',
              tradeBalance: 'Decrease'
            },
            explanation: [
              "1. Increased G raises AD immediately.",
              "2. Better infrastructure improves Productivity, shifting LRAS/SRAS RIGHT.",
              "3. Result: Significant increase in Real Output.",
              "4. Price level depends on relative magnitude of shifts, usually rises slightly in SR.",
            ]
          },
          {
            id: 'oil_shock',
            title: "Supply Shock: Increase in Oil Prices",
            type: 'supply',
            shift: 'left',
            description: "Cost of imported raw materials/energy increases.",
            curveShifts: { ad: 0, sras: -20, lras: 0 },
            impacts: {
              priceLevel: 'Increase',
              realOutput: 'Decrease',
              interestRate: 'Increase',
              taxRevenue: 'Decrease',
              tradeBalance: 'Decrease'
            },
            explanation: [
              "1. Higher input costs increase Cost of Production.",
              "2. Short Run Aggregate Supply (SRAS) shifts LEFT.",
              "3. Result: Stagflation.",
              "4. Side Effect: Lower output implies lower income tax revenue. Inflation worsens trade competitiveness."
            ]
          }
        ];

        const VariableCard = ({ title, value, icon, colorClass }) => {
          const IconComponent = Icons[icon];
          let arrow = <Icons.Minus className="w-5 h-5 text-gray-400" />;
          let bgColor = "bg-gray-50";
          let textColor = "text-gray-600";

          if (value === 'Increase') {
            arrow = <Icons.ArrowUp className="w-5 h-5 text-green-600" />;
            bgColor = "bg-green-50";
            textColor = "text-green-700";
          } else if (value === 'Decrease') {
            arrow = <Icons.ArrowDown className="w-5 h-5 text-red-600" />;
            bgColor = "bg-red-50";
            textColor = "text-red-700";
          } else if (value === 'Uncertain') {
            arrow = <Icons.Info className="w-5 h-5 text-amber-600" />;
            bgColor = "bg-amber-50";
            textColor = "text-amber-700";
          }

          return (
            <div className={`p-4 rounded-lg border ${bgColor} shadow-sm flex items-center justify-between transition-all duration-300`}>
              <div className="flex items-center gap-3">
                <div className={`p-2 rounded-full bg-white ${colorClass}`}>
                  <IconComponent className="w-5 h-5" />
                </div>
                <div>
                  <p className="text-xs font-medium text-gray-500 uppercase tracking-wider">{title}</p>
                  <p className={`font-bold ${textColor}`}>{value}</p>
                </div>
              </div>
              {arrow}
            </div>
          );
        };

        const ADASChart = ({ curveShifts }) => {
          const width = 400;
          const height = 300;
          const padding = 40;
          const originX = padding;
          const originY = height - padding;
          const endX = width - padding;
          const endY = padding;
          const baseLRASX = (originX + endX) / 2;
          const lrasX = baseLRASX + curveShifts.lras;
          const center = { x: width / 2, y: height / 2 };
          const adShift = curveShifts.ad;
          const srasShift = curveShifts.sras;

          const eqX = center.x + (adShift + srasShift) / 2;
          const eqY = center.y - (adShift - srasShift) / 2; 
          const oldEqX = center.x;
          const oldEqY = center.y;

          return (
            <svg width="100%" height="100%" viewBox={`0 0 ${width} ${height}`} className="overflow-visible">
              {/* Axes */}
              <line x1={originX} y1={originY} x2={endX} y2={originY} stroke="black" strokeWidth="2" markerEnd="url(#arrow)" />
              <line x1={originX} y1={originY} x2={originX} y2={endY} stroke="black" strokeWidth="2" markerEnd="url(#arrow)" />
              
              {/* Labels */}
              <text x={endX - 10} y={originY + 30} className="text-sm font-bold">Real Output (Y)</text>
              <text x={originX - 30} y={endY} className="text-sm font-bold" style={{ writingMode: 'vertical-rl' }}>Price Level (P)</text>

              <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                  <path d="M0,0 L0,6 L9,3 z" fill="#000" />
                </marker>
              </defs>

              {/* LRAS Curves */}
              <line x1={baseLRASX} y1={padding} x2={baseLRASX} y2={height - padding} stroke="#e5e7eb" strokeWidth="2" strokeDasharray="5,5" />
              <text x={baseLRASX} y={padding - 10} fill="#9ca3af" fontSize="10">LRAS₀</text>
              
              <line x1={lrasX} y1={padding} x2={lrasX} y2={height - padding} stroke="#dc2626" strokeWidth="3" className="transition-all duration-700 ease-out" />
              <text x={lrasX} y={padding - 10} fill="#dc2626" fontSize="12" fontWeight="bold" className="transition-all duration-700 ease-out">LRAS</text>

              {/* SRAS Curves */}
              <line x1={padding} y1={height-padding} x2={width-padding} y2={padding} stroke="#e5e7eb" strokeWidth="2" strokeDasharray="5,5" />
              <text x={width-padding} y={padding} fill="#9ca3af" fontSize="10">SRAS₀</text>

              <line 
                x1={padding + srasShift} y1={height-padding} 
                x2={width-padding + srasShift} y2={padding} 
                stroke="#2563eb" strokeWidth="3" 
                className="transition-all duration-700 ease-out" 
              />
              <text x={width-padding + srasShift} y={padding} fill="#2563eb" fontSize="12" fontWeight="bold" className="transition-all duration-700 ease-out">SRAS</text>

              {/* AD Curves */}
              <line x1={padding} y1={padding} x2={width-padding} y2={height-padding} stroke="#e5e7eb" strokeWidth="2" strokeDasharray="5,5" />
              <text x={width-padding} y={height-padding} fill="#9ca3af" fontSize="10">AD₀</text>

              <line 
                x1={padding + adShift} y1={padding} 
                x2={width-padding + adShift} y2={height-padding} 
                stroke="#16a34a" strokeWidth="3" 
                className="transition-all duration-700 ease-out" 
              />
              <text x={width-padding + adShift} y={height-padding} fill="#16a34a" fontSize="12" fontWeight="bold" className="transition-all duration-700 ease-out">AD</text>

              {/* Equilibrium Points */}
              <circle cx={oldEqX} cy={oldEqY} r="4" fill="#9ca3af" />
              <circle cx={eqX} cy={eqY} r="6" fill="#7c3aed" className="transition-all duration-700 ease-out" />
              
              <line x1={eqX} y1={eqY} x2={eqX} y2={originY} stroke="#7c3aed" strokeWidth="1" strokeDasharray="4,4" className="transition-all duration-700 ease-out" />
              <line x1={eqX} y1={eqY} x2={originX} y2={eqY} stroke="#7c3aed" strokeWidth="1" strokeDasharray="4,4" className="transition-all duration-700 ease-out" />

              <text x={eqX} y={originY + 15} fill="#7c3aed" fontSize="12" textAnchor="middle" className="transition-all duration-700 ease-out">Y₁</text>
              <text x={originX - 15} y={eqY + 4} fill="#7c3aed" fontSize="12" textAnchor="end" className="transition-all duration-700 ease-out">P₁</text>
            </svg>
          );
        };

        function App() {
          const [selectedScenarioId, setSelectedScenarioId] = useState('base');
          const scenario = SCENARIOS.find(s => s.id === selectedScenarioId) || SCENARIOS[0];

          return (
            <div className="min-h-screen bg-slate-50 text-slate-900 font-sans p-4 md:p-8">
              <div className="max-w-6xl mx-auto space-y-6">
                
                {/* Header */}
                <header className="flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-slate-200 pb-6">
                  <div>
                    <h1 className="text-3xl font-bold text-slate-800">Macroeconomic Simulator</h1>
                    <p className="text-slate-500 mt-1">Interactive AD-AS Model: Endogenous & Exogenous Interactions</p>
                  </div>
                  
                  <div className="flex items-center gap-2">
                     <button 
                      onClick={() => setSelectedScenarioId('base')}
                      className="flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-md hover:bg-slate-50 transition-colors"
                    >
                      <Icons.RefreshCw className="w-4 h-4" /> Reset
                    </button>
                  </div>
                </header>

                <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                  
                  {/* Left Column: Controls & Explanation */}
                  <div className="lg:col-span-4 space-y-6">
                    
                    {/* Scenario Selector */}
                    <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                      <label className="block text-sm font-semibold text-slate-700 mb-3">Select an Economic Shock (Exogenous Variable)</label>
                      <select 
                        value={selectedScenarioId}
                        onChange={(e) => setSelectedScenarioId(e.target.value)}
                        className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all font-medium text-slate-700"
                      >
                        {SCENARIOS.map(s => (
                          <option key={s.id} value={s.id}>{s.title}</option>
                        ))}
                      </select>
                      
                      <div className="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-100">
                        <h3 className="font-semibold text-blue-800 text-sm mb-1">Event Description</h3>
                        <p className="text-blue-600 text-sm leading-relaxed">
                          {scenario.description}
                        </p>
                      </div>
                    </div>

                    {/* Transmission Mechanism */}
                    <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-200 flex-grow">
                      <h3 className="font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <Icons.Activity className="w-5 h-5 text-purple-600" />
                        Transmission Mechanism
                      </h3>
                      
                      {Array.isArray(scenario.explanation) ? (
                        <ul className="space-y-3">
                          {scenario.explanation.map((step, idx) => (
                            <li key={idx} className="flex gap-3 text-sm text-slate-600 leading-relaxed">
                              <span className="flex-shrink-0 w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold">
                                {idx + 1}
                              </span>
                              <span>{step}</span>
                            </li>
                          ))}
                        </ul>
                      ) : (
                        <p className="text-sm text-slate-600">{scenario.explanation}</p>
                      )}

                      {scenario.note && (
                        <div className="mt-4 text-xs text-slate-400 italic border-t pt-2">
                          Note: {scenario.note}
                        </div>
                      )}
                    </div>

                  </div>

                  {/* Right Column: Visualization & Dashboard */}
                  <div className="lg:col-span-8 space-y-6">
                    
                    {/* Chart Area */}
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                       <div className="flex justify-between items-center mb-2">
                          <h3 className="font-bold text-slate-800">AD-AS Diagram</h3>
                          <div className="flex gap-4 text-xs font-medium">
                             <span className="flex items-center gap-1 text-green-600"><div className="w-3 h-3 bg-green-600 rounded-full"></div> AD</span>
                             <span className="flex items-center gap-1 text-blue-600"><div className="w-3 h-3 bg-blue-600 rounded-full"></div> SRAS</span>
                             <span className="flex items-center gap-1 text-red-600"><div className="w-3 h-3 bg-red-600 rounded-full"></div> LRAS</span>
                          </div>
                       </div>
                       <div className="aspect-[16/9] w-full bg-white rounded-lg overflow-hidden relative">
                          <ADASChart curveShifts={scenario.curveShifts} />
                       </div>
                       <p className="text-center text-xs text-slate-400 mt-2">P = Price Level, Y = Real Output, Yf = Potential Output</p>
                    </div>

                    {/* Variables Dashboard */}
                    <div>
                       <h3 className="font-bold text-slate-800 mb-4 ml-1">Impact on Endogenous Variables</h3>
                       <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                          <VariableCard 
                            title="Price Level (P)" 
                            value={scenario.impacts.priceLevel} 
                            icon="DollarSign"
                            colorClass="text-blue-600"
                          />
                          <VariableCard 
                            title="Real Output (Y)" 
                            value={scenario.impacts.realOutput} 
                            icon="TrendingUp"
                            colorClass="text-green-600"
                          />
                          <VariableCard 
                            title="Interest Rate (r)" 
                            value={scenario.impacts.interestRate} 
                            icon="Activity"
                            colorClass="text-purple-600"
                          />
                          <VariableCard 
                            title="Tax Revenue (T)" 
                            value={scenario.impacts.taxRevenue} 
                            icon="DollarSign"
                            colorClass="text-amber-600"
                          />
                          <VariableCard 
                            title="Trade Balance (NX)" 
                            value={scenario.impacts.tradeBalance} 
                            icon="Globe"
                            colorClass="text-cyan-600"
                          />
                       </div>
                    </div>

                  </div>
                </div>

                {/* Footer */}
                <footer className="text-center text-slate-400 text-sm py-6 border-t border-slate-200">
                  <p>Based on Macroeconomics Topic 6: Fiscal and Monetary Policies.</p>
                </footer>

              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>